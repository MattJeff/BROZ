# ============================================================================
# coturn TURN server configuration for LiveRelay SFU
# ============================================================================
# This file is mounted into the coturn Docker container.
#
# For a complete reference:
#   https://github.com/coturn/coturn/blob/master/examples/etc/turnserver.conf
# ============================================================================

# ── Listening ────────────────────────────────────────────────────────────────

listening-port=3478
tls-listening-port=5349

# External IP of the VPS (REQUIRED for correct relay addresses).
# Replace with your actual public IP.
# external-ip=203.0.113.10

# ── Relay ports ──────────────────────────────────────────────────────────────

min-port=49152
max-port=49200

# ── Authentication ───────────────────────────────────────────────────────────

# Long-term credentials (must match LIVERELAY_TURN_USERNAME / PASSWORD).
lt-cred-mech
user=liverelay:change-me-in-production

# Realm (must match LIVERELAY_TURN_REALM).
realm=sfu.example.com

# ── TLS (optional — for TURNS on port 5349) ─────────────────────────────────

# cert=/etc/coturn/certs/fullchain.pem
# pkey=/etc/coturn/certs/privkey.pem

# ── Logging ──────────────────────────────────────────────────────────────────

log-file=stdout
verbose

# ── Security ─────────────────────────────────────────────────────────────────

fingerprint
no-multicast-peers
no-cli

# Stale nonce lifetime (seconds).
stale-nonce=600

# Maximum allocations per user.
max-allocate-lifetime=3600
