# ============================================================================
# LiveRelay SFU — Environment Configuration
# ============================================================================
# Copy this file to .env and adjust values for your deployment.
#
#   cp .env.example .env
#
# All variables are prefixed with LIVERELAY_ to avoid collisions.
# ============================================================================

# ── Network ──────────────────────────────────────────────────────────────────

# Address to bind the HTTP(S) listener to.
LIVERELAY_BIND_ADDR=0.0.0.0:8080

# Public hostname of the server (used for TURN realm, TLS SNI, etc.)
# MUST be your actual domain in production.
LIVERELAY_PUBLIC_HOST=sfu.example.com

# ── TLS / HTTPS ──────────────────────────────────────────────────────────────
# Option A: Native TLS in the binary (set ENABLED=true + provide certs)
# Option B: Reverse proxy (Caddy/nginx) handles TLS — leave ENABLED=false

LIVERELAY_TLS_ENABLED=false
LIVERELAY_TLS_CERT_PATH=/app/certs/fullchain.pem
LIVERELAY_TLS_KEY_PATH=/app/certs/privkey.pem

# ── TURN / STUN ──────────────────────────────────────────────────────────────
# TURN is REQUIRED for clients behind symmetric NAT (most corporate networks).
#
# Option A: Embedded TURN server (runs inside the SFU binary)
#   Set TURN_EMBEDDED=true, configure port and credentials below.
#
# Option B: External TURN server (e.g., coturn)
#   Set TURN_EMBEDDED=false, provide TURN_URLS.

LIVERELAY_TURN_EMBEDDED=true
LIVERELAY_TURN_PORT=3478
LIVERELAY_TURN_USERNAME=liverelay
LIVERELAY_TURN_PASSWORD=change-me-in-production
LIVERELAY_TURN_REALM=sfu.example.com

# STUN servers (comma-separated). Google's public STUN is fine for most cases.
LIVERELAY_STUN_URLS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# External TURN URLs (only used when TURN_EMBEDDED=false).
# Example: turn:turn.example.com:3478,turns:turn.example.com:5349
LIVERELAY_TURN_URLS=

# ── Authentication ───────────────────────────────────────────────────────────

# MUST be set in production. If not set, a random value is generated
# (tokens will be invalidated on restart).
LIVERELAY_JWT_SECRET=your-super-secret-jwt-key-change-me

# ── Limits ───────────────────────────────────────────────────────────────────

LIVERELAY_MAX_ROOMS=100
LIVERELAY_MAX_SUBSCRIBERS_PER_ROOM=1000

# ── CORS ─────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed origins, or "*" for development.
# Example: https://app.example.com,https://admin.example.com

LIVERELAY_ALLOWED_ORIGINS=*

# ── Logging ──────────────────────────────────────────────────────────────────
# Levels: trace, debug, info, warn, error
# You can also use RUST_LOG for more granular control:
#   RUST_LOG=webrtc_sfu=debug,webrtc=warn,turn=info

LIVERELAY_LOG_LEVEL=info
